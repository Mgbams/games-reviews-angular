<div class="game-list-container">
  <h1>Add Game</h1>
  <mat-card class="mat-card">
    <h1>{{pageTitle }}</h1>
    <mat-card-content>
      <div class="mat-elevation-z8">
        <form
          [formGroup]="addGameForm"
          (submit)="onSubmit()"
          enctype="multipart/form-data"
        >
          <div class="mat-field-spacer">
            <mat-form-field class="form-field" appearance="outline">
              <mat-label> Name </mat-label>
              <input matInput formControlName="name" />
              <mat-error
                *ngIf="
                  addGameFormControls['name'].invalid &&
                  (addGameFormControls['name'].dirty ||
                    addGameFormControls['name'].touched)
                "
              >
                <span *ngIf="addGameFormControls['name'].errors?.['required']"
                  >Name is required</span
                >
              </mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline" class="publisher">
              <mat-label>Publisher</mat-label>
              <mat-select formControlName="publisher">
                <mat-option>--</mat-option>
                <mat-option
                  *ngFor="let item of publishers"
                  [value]="gameId ? item.name : item"
                >
                  {{ item.name }}
                </mat-option>
              </mat-select>
              <mat-error
                *ngIf="
                  addGameFormControls['publisher'].invalid &&
                  (addGameFormControls['publisher'].dirty ||
                    addGameFormControls['publisher'].touched)
                "
              >
                <span
                  *ngIf="addGameFormControls['publisher'].errors?.['required']"
                  >You need add a publisher</span
                >
              </mat-error>
            </mat-form-field>
          </div>

          <div>
            <div>
              <mat-form-field
                appearance="outline"
                class="birthday-form-field mat-form-field"
              >
                <mat-label> Date published </mat-label>
                <input
                  matInput
                  [matDatepicker]="datepicker"
                  formControlName="releaseDate"
                  class="releaseDate"
                />
                <mat-datepicker-toggle
                  matSuffix
                  [for]="datepicker"
                ></mat-datepicker-toggle>
                <mat-datepicker #datepicker>
                  <mat-datepicker-actions>
                    <button mat-button matDatepickerCancel>Cancel</button>
                    <button
                      mat-raised-button
                      color="primary"
                      matDatepickerApply
                    >
                      Apply
                    </button>
                  </mat-datepicker-actions>
                </mat-datepicker>
                <mat-error
                  *ngIf="
                    addGameFormControls['releaseDate'].invalid &&
                    (addGameFormControls['releaseDate'].dirty ||
                      addGameFormControls['releaseDate'].touched)
                  "
                >
                  <span
                    *ngIf="addGameFormControls['releaseDate'].errors?.['required']"
                    >Released date required</span
                  >
                </mat-error>
              </mat-form-field>
            </div>
          </div>

          <!--FILE UPLOAD-->
          <div class="file-upload-container">
            <input type="file" (change)="onFileChanged($event)" />
          </div>

          <div>
            <mat-form-field class="description" appearance="outline">
              <mat-label>Description</mat-label>
              <textarea
                matInput
                formControlName="description"
                class="description"
              ></textarea>

              <mat-error
                *ngIf="
                  addGameFormControls['description'].invalid &&
                  (addGameFormControls['description'].dirty ||
                    addGameFormControls['description'].touched)
                "
              >
                <span
                  *ngIf="addGameFormControls['description'].errors?.['required']"
                  >Description is required</span
                >
              </mat-error>
            </mat-form-field>
          </div>

          <div class="mat-field-spacer">
            <mat-form-field appearance="outline" class="genre">
              <mat-label>Genre</mat-label>
              <mat-select formControlName="genre">
                <mat-option>--</mat-option>
                <mat-option
                  *ngFor="let genre of genres"
                  [value]="gameId ? genre.name : genre"
                >
                  {{ genre.name }}
                </mat-option>
              </mat-select>
              <mat-error
                *ngIf="
                  addGameFormControls['genre'].invalid &&
                  (addGameFormControls['genre'].dirty ||
                    addGameFormControls['genre'].touched)
                "
              >
                <span *ngIf="addGameFormControls['genre'].errors?.['required']"
                  >Genre is required</span
                >
              </mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline" class="classification">
              <mat-label>Classification</mat-label>
              <mat-select formControlName="classification">
                <mat-option>--</mat-option>
                <mat-option
                  *ngFor="let item of classification"
                  [value]="gameId ? item.name : item"
                >
                  {{ item.name }}
                </mat-option>
              </mat-select>
              <mat-error
                *ngIf="
                  addGameFormControls['classification'].invalid &&
                  (addGameFormControls['classification'].dirty ||
                    addGameFormControls['classification'].touched)
                "
              >
                <span
                  *ngIf="addGameFormControls['classification'].errors?.['required']"
                  >Classification is required</span
                >
              </mat-error>
            </mat-form-field>
          </div>

          <div class="mat-field-spacer">
            <mat-form-field appearance="outline" class="platforms">
              <mat-label>Platform(s)</mat-label>
              <mat-select formControlName="platforms" multiple>
                <mat-option
                  *ngFor="let item of platforms"
                  [value]="gameId ? item.name : item"
                  >{{ item.name }}</mat-option
                >
              </mat-select>
              <mat-error
                *ngIf="
                  addGameFormControls['platforms'].invalid &&
                  (addGameFormControls['platforms'].dirty ||
                    addGameFormControls['platforms'].touched)
                "
              >
                <span
                  *ngIf="addGameFormControls['platforms'].errors?.['required']"
                  >Classification is required</span
                >
              </mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline" class="businessModel">
              <mat-label>Economic Model</mat-label>
              <mat-select formControlName="businessModel">
                <mat-option>--</mat-option>
                <mat-option
                  *ngFor="let item of businessModels"
                  [value]="gameId ? item.name : item"
                >
                  {{ item.name }}
                </mat-option>
              </mat-select>
              <mat-error
                *ngIf="
                  addGameFormControls['businessModel'].invalid &&
                  (addGameFormControls['businessModel'].dirty ||
                    addGameFormControls['businessModel'].touched)
                "
              >
                <span
                  *ngIf="addGameFormControls['businessModel'].errors?.['required']"
                  >Economic model is required</span
                >
              </mat-error>
            </mat-form-field>
          </div>

          <div>
            <button
              mat-raised-button
              color="primary"
              type="submit"
              class="saveButton"
              [ngClass]="actionBtn == 'Edit' ? 'edit' : 'create'"
            >
              {{ actionBtn }}
            </button>
          </div>
        </form>
      </div>
    </mat-card-content>
  </mat-card>
</div>
